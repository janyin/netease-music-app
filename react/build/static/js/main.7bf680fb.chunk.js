(this["webpackJsonpreact-music"]=this["webpackJsonpreact-music"]||[]).push([[1],{170:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(16),u=n.n(c),i=(n(98),n(85)),s=n.n(i),o=n(40),l=n(34),f=n(62),m=n(3),p=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(5)]).then(n.bind(null,207))})),d=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,208))})),b=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,206))}));var h=Object(l.b)(null,{getHomeData:o.b,getRankData:o.e,getHotWord:o.c})((function(t){var e=t.getHomeData,n=t.getRankData,c=t.getHotWord;return Object(r.useEffect)((function(){Promise.all([e(),n(),c()])}),[]),a.a.createElement(f.a,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement(s.a,{toast:!0,text:"loading"})},a.a.createElement(m.d,null,a.a.createElement(m.b,{exact:!0,path:"/",component:p}),a.a.createElement(m.b,{path:"/playlist",component:b}),a.a.createElement(m.b,{path:"/player",component:d}),a.a.createElement(m.a,{to:"/"}))))})),O=n(33),v=n(90),E=n(4),S={newSong:[],remd:[],rank:[],hotWord:[],searchResult:[],playList:{},curWord:"",curMusic:{},playerStatus:!1};var y=[v.a],g=Object(O.c)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_HOMEDATA":return Object(E.a)(Object(E.a)({},t),e.result);case"SET_RANKDATA":return Object(E.a)(Object(E.a)({},t),{},{rank:e.result});case"SET_HOTWORD":return Object(E.a)(Object(E.a)({},t),{},{hotWord:e.result});case"SET_PLAYLIST":return Object(E.a)(Object(E.a)({},t),{},{playList:e.result});case"GET_SEARCHSONG":return Object(E.a)(Object(E.a)({},t),{},{searchResult:e.result});case"SET_CURWORD":return Object(E.a)(Object(E.a)({},t),{},{curWord:e.curWord});case"CLEAR_SEARCH":return Object(E.a)(Object(E.a)({},t),{},{searchResult:[],curWord:""});case"SET_MUSICINFO":return Object(E.a)(Object(E.a)({},t),{},{curMusic:e.result});case"SET_PLAYERSTATUS":return Object(E.a)(Object(E.a)({},t),{},{playerStatus:e.status});default:return t}}),O.a.apply(void 0,y));u.a.render(a.a.createElement(l.a,{store:g},a.a.createElement(h,null)),document.getElementById("root"))},40:function(t,e,n){"use strict";n.d(e,"b",(function(){return j})),n.d(e,"e",(function(){return T})),n.d(e,"c",(function(){return k})),n.d(e,"d",(function(){return A})),n.d(e,"f",(function(){return w})),n.d(e,"a",(function(){return R})),n.d(e,"h",(function(){return x})),n.d(e,"g",(function(){return _})),n.d(e,"i",(function(){return U}));var r=n(7),a=n.n(r),c=n(23),u=(n(91),n(61)),i=n.n(u),s=n(88),o=n.n(s),l=function(t,e){return new Promise((function(n,r){o.a.get("https://api.mtnhao.com"+t,{params:e}).then((function(t){n(t.data)})).catch((function(t){i.a.offline("\u7f51\u7edc\u9519\u8bef"),r(t.data)}))}))},f=function(t){return l("/search?keywords=".concat(t))},m=function(t){return l("/song/url?id=".concat(t))},p=function(t){return l("/playlist/detail?id=".concat(t))},d=function(t){return l("/song/detail?ids=".concat(t))},b=function(t){return l("/check/music?id=".concat(t))},h=function(t){return l("/comment/hot?id=".concat(t,"&type=0"))};function O(t){var e=new Date(t),n=2020===e.getFullYear()?"":"".concat(e.getFullYear(),"\u5e74");return"".concat(n).concat(e.getMonth()+1,"\u6708").concat(e.getDate(),"\u65e5")}function v(t){return t.length>=2?"".concat(t[0].name,"/").concat(t[1].name):t[0].name}var E=function(t){return t.playlist.tracks.slice(0,20).map((function(t,e){var n=t.ar,r=t.id,a=t.name,c=t.alia,u=t.al,i=!1;return e<=2&&(i=!0),e<=8?{id:r,title:a,alias:c[0],artists:v(n),album:u.name,rank:"0".concat(e+1),color:i}:{id:r,title:a,alias:c[0],artists:v(n),album:u.name,rank:e+1,color:i}}))},S=function(t){return t.result.slice(0,6).map((function(t){var e=t.id,n=t.name,r=t.picUrl,a=t.playCount.toString();return a.length>=6&&(a="".concat(a[0]+a[1],"\u4e07")),{id:e,name:n,imgUrl:r,play:a}}))},y=function(t){var e=t.playlist.tracks.slice(0,25).map((function(t,e){var n="",r=t.ar,a=t.id,c=t.name,u=t.alia,i=t.al;return n=r.length>=2?"".concat(r[0].name,"/").concat(r[1].name):r[0].name,{id:a,title:c,alias:u[0],artists:n,album:i.name,rank:e+1}})),n=t.playlist;return{id:n.id,tags:n.tags,desc:n.description,music:e,name:n.name,imgUrl:n.coverImgUrl}},g=function(t){return t.result.songs.map((function(t){var e=t.artists,n=t.id,r=t.name,a=t.alias,c=t.album;return{id:n,title:r,alias:a[0],artists:v(e),album:c.name}}))},j=function(){return function(){var t=Object(c.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l("/personalized/newsong");case 2:return n=t.sent,t.next=5,l("/personalized");case 5:r=t.sent,e({type:"SET_HOMEDATA",result:{newSong:(a=n,a.result.map((function(t){var e=t.song,n=e.artists,r=e.album;return{id:t.id,title:t.name,artists:v(n),album:r.name}}))),remd:S(r)}});case 7:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(){return function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l("/playlist/detail?id=3778678");case 2:n=t.sent,e({type:"SET_RANKDATA",result:E(n)});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(){return function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l("/search/hot");case 2:n=t.sent,e({type:"SET_HOTWORD",result:n.result.hots});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:r=e.sent,n({type:"SET_PLAYLIST",result:y(r)});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(){return function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().curWord,t.next=3,f(r);case 3:c=t.sent,e({type:"GET_SEARCHSONG",result:g(c)});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},R=function(){return{type:"CLEAR_SEARCH"}},x=function(t){return{type:"SET_CURWORD",curWord:t.trim()}},_=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){var r,c,u,i,s,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,c=t.artists,u=t.title,e.next=3,b(r);case 3:if(i=e.sent,!i.success){e.next=16;break}return e.next=8,Promise.all([m(r),h(r),d(r)]);case 8:if(s=e.sent,o=s[0].data[0].url,l=s[2].songs[0].al.picUrl,o){e.next=13;break}return e.abrupt("return","DISABLEMUSIC");case 13:n({type:"SET_MUSICINFO",result:{id:r,musicUrl:o,imgUrl:l,artists:c,title:u,comment:(a=s[1].hotComments,a.map((function(t){var e=t.content,n=t.likedCount,r=t.user;return{content:e,likedCount:n,username:r.nickname,avatarUrl:r.avatarUrl,time:O(t.time)}})))}}),e.next=17;break;case 16:return e.abrupt("return","DISABLEMUSIC");case 17:return e.abrupt("return","success");case 18:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()},U=function(t){return{type:"SET_PLAYERSTATUS",status:t}}},93:function(t,e,n){t.exports=n(170)}},[[93,2,3]]]);
//# sourceMappingURL=main.7bf680fb.chunk.js.map